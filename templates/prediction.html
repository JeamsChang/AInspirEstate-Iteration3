<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <title>Prediction</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/nicepage.css') }}" media="screen">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/prediction.css') }}" media="screen">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/leaflet.css') }}">
  <script class="u-script" type="text/javascript" src="{{ url_for('static', filename='js/jquery-1.9.1.min.js') }}" defer=""></script>
  <script class="u-script" type="text/javascript" src="{{ url_for('static', filename='js/nicepage.js') }}" defer=""></script>
  <meta name="generator" content="Nicepage 5.17.1, nicepage.com">
  <meta name="referrer" content="origin">
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
  <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,500,500i,700,700i">
  
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "AInspirEstate",
      "logo": "images/favicon.png?rand=e350"
    }
  </script>

  <meta name="theme-color" content="#73a3de">
  <meta property="og:title" content="Expectation">
  <meta property="og:description" content="">
  <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>

<body class="u-body u-xl-mode" data-lang="en">
  <header class="u-clearfix u-header u-header" id="sec-6772">
    <div class="u-clearfix u-sheet u-sheet-1">
      <a href="https://ainspirestate.studio/" class="u-image u-logo u-image-1" data-image-width="696" data-image-height="546">
        <img src="{{ url_for('static', filename='favicon.ico') }}" class="u-logo-image u-logo-image-1">
      </a>
      <nav class="u-dropdown-icon u-menu u-menu-dropdown u-offcanvas u-menu-1" data-responsive-from="MD">
        <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px; font-weight: 700; text-transform: uppercase;">
          <a class="u-button-style u-custom-active-border-color u-custom-active-color u-custom-border u-custom-border-color u-custom-borders u-custom-hover-border-color u-custom-hover-color u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-text-active-color u-custom-text-color u-custom-text-decoration u-custom-text-hover-color u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
            <svg class="u-svg-link" viewBox="0 0 24 24">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect y="1" width="16" height="2"></rect>
                <rect y="7" width="16" height="2"></rect>
                <rect y="13" width="16" height="2"></rect>
              </g>
            </svg>
          </a>
        </div>
        <div class="u-custom-menu u-nav-container">
          <ul class="u-custom-font u-font-ubuntu u-nav u-spacing-2 u-unstyled u-nav-1">
            <li class="u-nav-item">
              <a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90" href="{{ url_for('index') }}" style="padding: 10px 20px;">
                Home
              </a>
            </li>
            <li class="u-nav-item">
              <a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90" href="{{ url_for('browsing') }}" style="padding: 10px 20px;">
                BROWSING
              </a>
            </li>
            <li class="u-nav-item">
              <a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90" href="{{ url_for('prediction') }}" style="padding: 10px 20px;">
                Prediction
              </a>
            </li>
            <li class="u-nav-item">
              <a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90" href="{{ url_for('demand') }}" style="padding: 10px 20px;">
                demand
              </a>
            </li>
            <!-- <li class="u-nav-item">
              <a class="u-border-2 u-border-active-palette-1-base u-border-hover-palette-1-light-1 u-button-style u-nav-link u-text-active-grey-90 u-text-grey-90 u-text-hover-grey-90" href="{{ url_for('intervention') }}" style="padding: 10px 20px;">
                intervention
              </a>
            </li> -->
          </ul>
        </div>
        <div class="u-custom-menu u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-inner-container-layout u-sidenav-overflow">
              <div class="u-menu-close"></div>
              <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2">
                <li class="u-nav-item">
                  <a class="u-button-style u-nav-link" href="{{ url_for('index') }}">
                    Home
                  </a>
                </li>
                <li class="u-nav-item">
                  <a class="u-button-style u-nav-link" href="{{ url_for('browsing') }}">
                    Browsing
                  </a>
                </li>
                <li class="u-nav-item">
                  <a class="u-button-style u-nav-link" href="{{ url_for('prediction') }}">
                    Prediction
                  </a>
                </li>
                <li class="u-nav-item">
                  <a class="u-button-style u-nav-link" href="{{ url_for('demand') }}">
                    Demand
                  </a>
                </li>
                <!-- <li class="u-nav-item">
                  <a class="u-button-style u-nav-link" href="{{ url_for('intervention') }}">
                    Intervention
                  </a>
                </li> -->
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>
      </nav>
    </div>
  </header>

  <!-- Section 1 User query for budget expectation-->
  <section class="u-clearfix u-section-1" id="sec-c9e9">
    <div class="u-clearfix u-sheet u-sheet-1">
      <div class="u-container-style u-expanded-width u-group u-image u-radius-50 u-shape-round u-image-1" data-animation-name="customAnimationIn" data-animation-duration="2000" data-image-width="1500" data-image-height="1071"  style="background-image: url('static/images/apartment-building-city-with-copy-space.jpg');">
        <div class="u-container-layout u-container-layout-1">
          <h1 class="u-text u-text-1"> Easy Way to get a budget prediction</h1>
          <div class="u-align-left u-form u-white u-form-1">
            <form action="https://forms.nicepagesrv.com/v2/form/process" class="u-clearfix u-form-spacing-8 u-form-vertical u-inner-form" source="email" name="form" style="padding: 12px;">
              <h5 class="u-align-left u-form-group u-form-text u-label-top u-text u-text-2">Please adjust your needs to see how much budget you need</h5>
              <div class="u-form-group u-form-select u-label-top u-form-group-2">
                <label for="select-f4db" class="u-label u-label-1">Suburb</label>
                <div class="u-form-select-wrapper">
                  <select id="select-f4db" name="select" class="u-border-none u-grey-5 u-input u-input-rectangle u-input-1">
                    <option value="-">Please select one suburb</option>
                    {% for suburb in suburbs %}
                      <option value="{{ suburb.suburb }}">
                        {{ suburb.suburb }}
                      </option>
                    {% endfor %}
                  </select>
                  <svg class="u-caret u-caret-svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" style="fill:currentColor;" xml:space="preserve"><polygon class="st0" points="8,12 2,4 14,4 "></polygon></svg>
                </div>
              </div>
              <div class="u-form-group u-form-select u-label-top u-form-group-3">
                <label for="select-e41f" class="u-label u-label-2">type</label>
                <div class="u-form-select-wrapper">
                  <select id="select-e41f" name="select-4" class="u-border-none u-grey-5 u-input u-input-rectangle u-input-2">
                  </select>
                  <svg class="u-caret u-caret-svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" style="fill:currentColor;" xml:space="preserve"><polygon class="st0" points="8,12 2,4 14,4 "></polygon></svg>
                </div>
              </div>
              <div class="u-form-group u-form-select u-label-top u-form-group-4">
                <label for="select-bc39" class="u-label u-label-3">bedroom</label>
                <div class="u-form-select-wrapper">
                  <select id="select-bc39" name="select-1" class="u-border-none u-grey-5 u-input u-input-rectangle u-input-3">
                    <option id="bedroom-option" data-calc=""></option>
                  </select>
                  <svg class="u-caret u-caret-svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" style="fill:currentColor;" xml:space="preserve"><polygon class="st0" points="8,12 2,4 14,4 "></polygon></svg>
                </div>
              </div>
              <div class="u-form-group u-form-select u-label-top u-form-group-5">
                <label for="select-f3b2" class="u-label u-label-4">bathroom</label>
                <div class="u-form-select-wrapper">
                  <select id="select-f3b2" name="select-2" class="u-border-none u-grey-5 u-input u-input-rectangle u-input-4">
                    <option id="bathroom-option" data-calc=""></option>
                  </select>
                  <svg class="u-caret u-caret-svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" style="fill:currentColor;" xml:space="preserve"><polygon class="st0" points="8,12 2,4 14,4 "></polygon></svg>
                </div>
              </div>
              <div class="u-form-group u-form-select u-label-top u-form-group-6">
                <label for="select-b369" class="u-label u-label-5">Garage</label>
                <div class="u-form-select-wrapper">
                  <select id="select-b369" name="select-3" class="u-border-none u-grey-5 u-input u-input-rectangle u-input-5">
                    <option id="garage-option" data-calc=""></option>
                  </select>
                  <svg class="u-caret u-caret-svg" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" style="fill:currentColor;" xml:space="preserve"><polygon class="st0" points="8,12 2,4 14,4 "></polygon></svg>
                </div>
              </div>
              <div class="u-align-right u-form-group u-form-submit u-label-top">
                <button id="search-button" type="button" class="u-active-palette-3-base u-border-active-palette-3-base u-border-hover-palette-3-base u-border-none u-btn u-btn-submit u-button-style u-hover-palette-3-base u-palette-2-base u-btn-1">
                <a  href="#" >
                  Submit
                </a>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>


  <section id = "section-2" class="u-clearfix u-grey-5 u-section-2" id="carousel_ec54">
    <div class="u-clearfix u-sheet u-sheet-1">
      <div class="u-container-style u-expanded-width u-group u-radius-20 u-shape-round u-white u-group-1">
        <div class="u-container-layout u-container-layout-1">
          <h2 class="u-align-left u-text u-text-default u-text-1">AI Budget expectation</h2>
          <h2 id="predict-price" class="u-align-center u-custom-font u-font-montserrat u-text u-text-palette-2-dark-1 u-text-2" data-animation-name="customAnimationIn" data-animation-duration="1000" data-animation-direction="">$ ???</h2>
          <div class="u-align-center u-container-style u-grey-10 u-group u-group-2">
            <div class="u-container-layout u-container-layout-2">
              <div class="u-expanded u-grey-light-2 u-map">
                <div class="embed-responsive">
                  <div id="map-container" style="width: 100%; height: 100%; margin: 0 auto; z-index: 1;"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="u-align-center u-container-style u-grey-25 u-group u-opacity u-opacity-60 u-shape-rectangle u-group-3">
            <div class="u-container-layout u-container-layout-3" style=" z-index: 2;">
              <div class="u-clearfix u-group-elements u-group-elements-1">
                <span class="u-file-icon u-icon u-icon-1"><img src="{{ url_for('static', filename='images/2590601.png')}}" alt=""></span>
                <span class="u-file-icon u-icon u-icon-2"><img src="{{ url_for('static', filename='images/405121.png')}}" alt=""></span>
                <span class="u-file-icon u-icon u-icon-3"><img src="{{ url_for('static', filename='images/887184.png')}}" alt=""></span>
                <span class="u-file-icon u-icon u-icon-4"><img src="{{ url_for('static', filename='images/2642358.png')}}" alt=""></span>
                <p id="type" class="u-text u-text-3">-</p>
                <p id="num_car" class="u-text u-text-4">-</p>
                <p id="num_bathroom" class="u-text u-text-5">-</p>
                <p id="num_bedroom" class="u-text u-text-6">-</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="u-align-center u-clearfix u-section-3" id="carousel_c413">
    <div class="u-clearfix u-sheet u-sheet-1">
      <div class="u-container-style u-expanded-width u-group u-image u-radius-40 u-shading u-image-1" data-image-width="1202" data-image-height="800" style="background-image: url('static/images/sa-min.jpg');">
        <div class="u-container-layout u-container-layout-1">
          <div class="data-layout-selected u-clearfix u-expanded-width u-gutter-0 u-layout-wrap u-layout-wrap-1">
            <div class="u-layout">
              <div class="u-layout-row">
                <div class="u-align-left u-container-style u-layout-cell u-palette-1-dark-2 u-size-40 u-layout-cell-1">
                  <div class="u-border-3 u-border-palette-1-dark-2 u-container-layout u-container-layout-2">
                    <h2 class="u-text u-text-default u-text-1" data-animation-name="customAnimationIn" data-animation-duration="1000"> Are you ready to explore AI's decision-making journey?<br>
                    </h2>
                  </div>
                </div>
                <div class="u-align-center u-container-style u-layout-cell u-palette-1-dark-2 u-size-20 u-layout-cell-2" data-animation-name="customAnimationIn" data-animation-duration="1000" data-animation-direction="">
                  <div class="u-border-3 u-border-palette-1-dark-2 u-container-layout u-valign-middle u-container-layout-3">
                    <a href="{{ url_for('demand') }}" class="u-border-2 u-border-black u-border-hover-white u-btn u-button-style u-hover-feature u-hover-palette-1-dark-1 u-palette-1-dark-1 u-btn-1">
                      Let's go
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-6200">
    <div class="u-clearfix u-sheet u-sheet-1">
      <p class="u-small-text u-text u-text-variant u-text-1">TA07 | SEAM | A self-reflective and transcendent team</p>
    </div>
  </footer>

  <script src="{{ url_for('static', filename='js/leaflet.js') }}"></script>

  <script>
    // Element id
    const suburb_id = "select-f4db";
    const type_id = "select-e41f";
    const bedroom_id = "select-bc39";
    const bathroom_id = "select-f3b2";
    const garage_id = "select-b369";

    // Elements for taking the user's input
    const suburbDropdown = document.getElementById(suburb_id);
    const typeDropdown = document.getElementById(type_id);
    const bedroomDropdown = document.getElementById(bedroom_id);
    const bathroomDropdown = document.getElementById(bathroom_id);
    const garageDropdown = document.getElementById(garage_id);

    // Update the dropdown options
    function updateDropdownOptions(element_id, options) {
      let dropdown = document.getElementById(element_id);
      if (element_id == "select-e41f"){
        options.forEach(option => {
          const optionElement = document.createElement('option');
          optionElement.value = option;
          if (option == "h") {
            optionElement.textContent = "house";
          } else if (option == "u") {
            optionElement.textContent = "unit";
          } else if (option == "t") {
            optionElement.textContent = "townhouse";
          } else {
            optionElement.textContent = "unknown";
          }
          dropdown.appendChild(optionElement);
        });
      } else {
        options.forEach(option => {
          const optionElement = document.createElement('option');
          optionElement.value = option;
          optionElement.textContent = option;
          dropdown.appendChild(optionElement);
        });
      }
      
    }

    // Get the default suburb value
    let selectedSuburb = suburbDropdown.value;
    console.log(selectedSuburb);

    // dynamic update the type list
    suburbDropdown.addEventListener("change", async function() {
      let dropdown = document.getElementById(type_id);
      dropdown.innerHTML = '<option>Loading ...</option>';  
      // Get the selected suburb value
      selectedSuburb = suburbDropdown.value;
      console.log(selectedSuburb);

      // Get the types for the selected suburb
      fetch(`/get_types?suburb=${selectedSuburb}`)
        .then(response => response.json())
        .then(data => {
          // let dropdown = document.getElementById(type_id);
          dropdown.innerHTML = '<option>Ready to select :)</option>';
          updateDropdownOptions(type_id, data);

        })
        .catch(error => {
          console.error('Error fetching types:', error);
        });
      });

    // dynamic update the bedroom list
    typeDropdown.addEventListener("change", async function() {
      let dropdown = document.getElementById(bedroom_id)
      dropdown.innerHTML = '<option>Loading ...</option>'; 
      // Get the selected suburb and type value
      selectedType = typeDropdown.value;
      selectedSuburb = suburbDropdown.value;
      console.log(selectedSuburb, selectedType);

      // Get the bedrooms for the selected type
      fetch(`/get_bedrooms?suburb=${selectedSuburb}&type=${selectedType}`)
        .then(response => response.json())
        .then(data => {
          // let dropdown = document.getElementById(bedroom_id)
          dropdown.innerHTML = '<option>Ready to select :)</option>';
          updateDropdownOptions(bedroom_id, data);
        })
        .catch(error => {
          console.error('Error fetching bedrooms:', error);
        });
      });

    // dynamic update the bathroom list
    bedroomDropdown.addEventListener("change", async function() {
      let dropdown = document.getElementById(bathroom_id)
      dropdown.innerHTML = '<option>Loading ...</option>'; 

      // Get the selected suburb, type and bedroom value
      selectedType = typeDropdown.value;
      selectedSuburb = suburbDropdown.value;
      selectedBedroom = bedroomDropdown.value;
      console.log(selectedSuburb, selectedType, selectedBedroom);

      // Get the bathrooms for the selected type
      fetch(`/get_bathrooms?suburb=${selectedSuburb}&type=${selectedType}&bedroom=${selectedBedroom}`)
        .then(response => response.json())
        .then(data => {
          // let dropdown = document.getElementById(bathroom_id)
          dropdown.innerHTML = '<option>Ready to select :)</option>';
          updateDropdownOptions(bathroom_id, data);
        })
        .catch(error => {
          console.error('Error fetching bathrooms:', error);
        });
    });

    // dynamic update the garage list
    bathroomDropdown.addEventListener("change", async function() {
      let dropdown = document.getElementById(garage_id)
      dropdown.innerHTML = '<option>Loading...</option>';
      // Get the selected suburb, type, bedroom and bathroom value
      selectedType = typeDropdown.value;
      selectedSuburb = suburbDropdown.value;
      selectedBedroom = bedroomDropdown.value;
      selectedBathroom = bathroomDropdown.value;
      console.log(selectedSuburb, selectedType, selectedBedroom, selectedBathroom);

      // Get the garages for the selected type
      fetch(`/get_garages?suburb=${selectedSuburb}&type=${selectedType}&bedroom=${selectedBedroom}&bathroom=${selectedBathroom}`)
        .then(response => response.json())
        .then(data => {
          // let dropdown = document.getElementById(garage_id)
          dropdown.innerHTML = '<option>Ready to select :)</option>';
          updateDropdownOptions(garage_id, data);
        })
        .catch(error => {
          console.error('Error fetching garages:', error);
        });
    });

    // Initialize the map when the page loads
    var map = L.map("map-container").setView([-37.8136, 144.9631], 10);
    
    // Add a tile layer (you can choose a different tile layer if needed)
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Function to highlight a suburb on the map and move the map to that suburb
    function highlightAndCenterSuburb(suburbName) {
      // Load the GeoJSON data
      fetch("static/geojson/suburb-10-vic.geojson")
        .then(response => response.json())
        .then(data => {
          // Loop through the GeoJSON features
          data.features.forEach(feature => {
            // Check if the feature's properties include the selected suburbName
            if (feature.properties.vic_loca_2.toLowerCase().trim() === suburbName.toLowerCase().trim()) {
              // Create a Leaflet GeoJSON layer for the selected feature and highlight it
              const highlightedLayer = L.geoJSON(feature, {
                style: {
                  weight: 2,
                  color: "blue" // You can choose any highlight color you prefer
                }
              }).addTo(map);

              // Fit the map to the bounds of the highlighted suburb
              map.fitBounds(highlightedLayer.getBounds());
            }
          });
        })
        .catch(error => {
          console.error('Error loading GeoJSON:', error);
        });
    }
    function formatCurrency(amount) {
      const formattedAmount = Math.round(amount).toLocaleString('en-AU');

      return 'AU$' + formattedAmount;
    }

    // When the user clicks the search button
    document.getElementById("search-button").addEventListener("click", async function() {
      console.log("search button clicked");
      // Get the user's selected parameters
      var selectedSuburb = document.getElementById("select-f4db").value;
      var selectedType = document.getElementById("select-e41f").value;
      var selectedBedrooms = document.getElementById("select-bc39").value;
      var selectedBathrooms = document.getElementById("select-f3b2").value;
      var selectedGarage = document.getElementById("select-b369").value;

      // get the prediction
      let res = await fetch ("{{url_for('predict_price')}}", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          "suburb": selectedSuburb,
          "type": selectedType,
          "rooms": selectedBedrooms,
          "bathroom": selectedBathrooms,
          "car": selectedGarage
        })
      })

      var num_bedroom = document.getElementById("num_bedroom");
      var num_bathroom = document.getElementById("num_bathroom");
      var num_car = document.getElementById("num_car");
      var type = document.getElementById("type");
      num_bedroom.textContent = selectedBedrooms;
      num_bathroom.textContent = selectedBathrooms;
      num_car.textContent = selectedGarage;
      if (selectedType == "h") {
        selectedType = "house";
      } else if (selectedType == "u") {
        selectedType = "unit";
      } else if (selectedType == "t") {
        selectedType = "townhouse";
      } else {
        selectedType = "unknown";
      }
      type.textContent = selectedType;

      // get the response
      let expectation = await res.json();
      console.log(expectation);
      var predict_price = document.getElementById("predict-price");
      predict_price.textContent = formatCurrency(expectation);

      // Clear any previous highlighted suburbs
      map.eachLayer(layer => {
        if (layer.feature) {
          map.removeLayer(layer);
        }
      });

      // Highlight and center the selected suburb
      highlightAndCenterSuburb(selectedSuburb);

      // Scroll to the map
      document.getElementById("section-2").scrollIntoView({behavior: "smooth"});
    });
  </script>
</body>
</html>